<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>School Summary</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family: "Segoe UI", sans-serif;
      background: url('https://i.imgur.com/lS5zbQD.png') no-repeat center center/cover;
      color:#fff; min-height:100vh;
      display:flex; flex-direction:column; align-items:center;
    }
    .login-box{
      margin:auto; background:rgba(0,0,0,0.7);
      padding:25px; border-radius:12px; text-align:center;
      width:300px;
    }
    input, textarea{width:100%;padding:10px;margin:10px 0;border-radius:8px;border:none}
    button{padding:10px 20px;border:none;border-radius:8px;background:#0d6efd;color:#fff;font-weight:bold;cursor:pointer}
    button:hover{background:#0b5ed7}
    .error{color:red;margin-top:10px;font-weight:bold}
    .success{color:#4caf50;margin-top:10px;font-weight:bold}
    h1{margin:20px 0;text-align:center;color:#FFD700;font-weight:900}
    h2{margin:15px 0;color:#FFD700}
    .summary{background:rgba(0,0,0,0.55);padding:15px;border-radius:12px;margin:10px 0}
    .summary p{margin:6px 0;color:#f5f5f5}
    .summary strong{color:#ffeb3b}
    .summary img{max-width:100%;margin-top:10px;border-radius:8px}
    .delete-btn{background:red;margin-top:8px}
    .form-box{background:rgba(0,0,0,0.6);padding:20px;border-radius:12px;margin:20px auto;width:90%;max-width:600px;display:none}
    footer{margin-top:auto;padding:15px;color:#ccc;text-align:center}
  </style>
</head>
<body>

  <!-- Login Page -->
  <div id="loginPage" class="login-box">
    <h2>School Summary Login</h2>
    <input type="password" id="password" placeholder="Enter Password">
    <button onclick="login()">Login</button>
    <p id="loginMessage"></p>
  </div>

  <!-- Main Content -->
  <div id="mainPage" style="display:none;width:100%;max-width:900px;">
    <h1>üìò SCHOOL DAILY SUMMARY</h1>

    <!-- Admin post form -->
    <div class="form-box" id="postForm">
      <h2>Post a New Summary</h2>
      <input id="date" placeholder="Date (e.g. 16 Sept 2025)">
      <input id="subject" placeholder="Subject (e.g. Math)">
      <input id="page" placeholder="Page (e.g. 22)">
      <input id="exercise" placeholder="Exercise (e.g. Exercise 5)">
      <textarea id="text" rows="3" placeholder="Summary text..."></textarea>
      <input type="file" id="image" accept="image/*">
      <button id="postBtn">Post Summary</button>
      <p id="postMessage"></p>
    </div>

    <!-- Summaries list -->
    <div id="summaries-container">No summaries yet.</div>

    <footer>Made with ‚ù§Ô∏è for our class</footer>
  </div>

  <script>
    let userRole = null; // "student" or "admin"
    let summaries = [];  // local storage for summaries

    function login() {
      const password = document.getElementById("password").value;
      const message = document.getElementById("loginMessage");

      if (password === "Tba") {
        userRole = "student";
        document.getElementById("loginPage").style.display = "none";
        document.getElementById("mainPage").style.display = "block";
        renderSummaries();
      } else if (password === "Admin123") {
        userRole = "admin";
        document.getElementById("loginPage").style.display = "none";
        document.getElementById("mainPage").style.display = "block";
        document.getElementById("postForm").style.display = "block";
        renderSummaries();
      } else {
        message.textContent = "Invalid password!";
        message.className = "error";
      }
    }

    document.getElementById("postBtn").onclick = () => {
      const date = document.getElementById("date").value;
      const subject = document.getElementById("subject").value;
      const page = document.getElementById("page").value;
      const exercise = document.getElementById("exercise").value;
      const text = document.getElementById("text").value;
      const file = document.getElementById("image").files[0];
      const msg = document.getElementById("postMessage");

      if (!date || !subject || !page || !text) {
        msg.textContent = "‚ö†Ô∏è Please fill in all fields!";
        msg.className = "error";
        return;
      }

      let imageUrl = "";
      if (file) {
        imageUrl = URL.createObjectURL(file); // local preview only
      }

      summaries.push({ id: Date.now(), date, subject, page, exercise, text, imageUrl });

      msg.textContent = "‚úÖ Summary posted successfully!";
      msg.className = "success";

      // Clear form
      document.getElementById("date").value = "";
      document.getElementById("subject").value = "";
      document.getElementById("page").value = "";
      document.getElementById("exercise").value = "";
      document.getElementById("text").value = "";
      document.getElementById("image").value = "";

      renderSummaries();
    };

    function renderSummaries() {
      const container = document.getElementById("summaries-container");
      container.innerHTML = "";
      if (summaries.length === 0) {
        container.innerHTML = "<p>No summaries yet.</p>";
        return;
      }

      summaries.forEach((s) => {
        let html = `
          <div class="summary">
            <p><strong>üìÖ Date:</strong> ${s.date}</p>
            <p><strong>üìò Subject:</strong> ${s.subject}</p>
            <p><strong>üìñ Page:</strong> ${s.page}</p>
            <p><strong>üìù Summary:</strong> ${s.text}</p>
            <p><strong>üìÇ Exercise:</strong> ${s.exercise}</p>
            ${s.imageUrl ? `<img src="${s.imageUrl}">` : ""}
        `;
        if (userRole === "admin") {
          html += `<button class="delete-btn" onclick="deleteSummary(${s.id})">üóëÔ∏è Delete</button>`;
        }
        html += `</div>`;
        container.innerHTML += html;
      });
    }

    function deleteSummary(id) {
      summaries = summaries.filter(s => s.id !== id);
      renderSummaries();
    }
  </script>
</body>
</html>
